<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></head><body><h1>自定义功能</h1>
<h2>简介</h2>
<p>自定义功能：如果您的产品功能不在标准功能中，您可以自定义功能。</p>
<p>功能点是对产品功能的抽象表示，每种功能都可以通过不同功能类型定义。目前平台提供：布尔型、数值型、枚举型、故障型、字符串型、透传型这 6 种功能类型。</p>
<p><img src="/goat/20200717/3e41a6b3adb4420981662c4e73fcd2ff.png" alt="image.png"></p>
<p><img src="/goat/20200410/5de3f404ceb94977899a1521ccf32efe.png" alt="image.png"></p>
<ul>
<li>布尔型、数值型和枚举型是基础类型，大部分功能可通过这 3 种功能类型定义。</li>
<li>故障型专门用于故障定义，便于在后台统计故障。</li>
<li>字符串型和透传型为高级类型，用于较复杂功能。只有当其他类型无法满足需求时，才推荐使用。</li>
</ul>
<p>对于如何定义功能点，下文将有详细介绍。</p>
<h2>功能点相关概念</h2>
<p><code>功能点</code>：具体智能设备功能的抽象，用于描述产品功能及其参数。</p>
<p><code>功能点ID</code>：功能点的编码。后续设备与云端的功能数据传输通过功能点 ID 进行。</p>
<p><code>功能点名称</code>：自定义的功能名称。</p>
<p><code>标识名</code>：功能点 code 值，用于 App 显示功能名称的多语言管理。支持字母、数字和下划线，以字母开头。</p>
<p><code>数据类型</code>：</p>
<ul>
<li>布尔型（bool）：非真即假的二值型变量。如：开关功能，开/关。</li>
<li>数值型（value）：可线性调节类型的数据。如：温度调节，温度范围 20-40℃。</li>
<li>枚举型（enum）：自定义的有限集合值。如：工作档位，低档/中档/高档。</li>
<li>故障型（fault）：专门用于上报和统计故障的功能点，支持多故障，数据只上报。</li>
<li>字符串型（string）：以字符串形式传输的功能点。</li>
<li>透传型（raw）：以二进制形式透传的功能点。一般不建议使用，上述功能点无法满足的复杂功能，可采用透传型数据。</li>
</ul>
<p><code>数据传输类型</code>：</p>
<ul>
<li>可下发可上报：指令数据可以下发给设备，设备数据可以上报给云端。</li>
<li>只上报：数据只支持从设备上报。</li>
<li>只下发：数据只支持从云端下发。</li>
</ul>
<h2>功能类型详解</h2>
<h3>布尔型</h3>
<p><img src="/goat/20200410/0e21c8e449554abd995c4ae59856a130.png" alt="image.png"></p>
<p>适用功能：非真即假的二值型变量功能。</p>
<p>功能范例：设备的开关、取暖器的童锁、电风扇的摇头、空气净化器的滤芯复位等功能，均可采用布尔型表示。</p>
<h3>数值型</h3>
<p>适用功能：可线性调节类型的数据。</p>
<p><img src="/goat/20200410/2d569d34a40d46ab96108cbc41d7e285.png" alt="image.png"></p>
<p>功能案例：</p>
<ul>
<li>温度调节，温度范围 20-40，间距为 1，单位为 ℃，表达含义为该产品可调节温度 20-40℃，每操作一次变化 1℃。</li>
<li>如预约功能，可预约 1、2、3……12 小时开关机，则可设置数值范围为：1-12，间距：1，单位：小时。</li>
</ul>
<p>如有疑问，可查看：<a href="https://support.tuya.com/zh/help/_list?category=602132">数值型常见问题</a>。</p>
<h3>枚举型</h3>
<p>适用功能：该功能下存在有限的自定义值集合。</p>
<p><img src="/goat/20200410/b4e661e546904a94aa0edf56ce0dfe49.png" alt="image.png"></p>
<p>功能案例：</p>
<ul>
<li>档位：低档，中档和高档。</li>
<li>模式：舒适模式、睡眠模式、智能模式和节能模式。</li>
<li>颜色：红色、蓝色、绿色和黑色。</li>
</ul>
<p>注意：编辑功能点时，枚举值支持字母、数字和下划线。按回车键后，枚举值自动生成。枚举值编码从 0 开始，在硬件联调中以枚举值编码进行传输。每个枚举值长度不超过 15 字符，最多支持定义 10 个枚举值。</p>
<p>枚举值每输入一个，需要回车一次，枚举值将确认生成。</p>
<p>如有疑问，可查看：<a href="https://support.tuya.com/zh/help/_list?category=602133">枚举型常见问题</a>。</p>
<h3>故障型</h3>
<p>适用功能：专门用于上报和统计故障的功能点，后续此类型功能将被用于统计。</p>
<p><img src="/goat/20200410/7e34459cdced4169b1e043ac2448a8b2.png" alt="image.png"></p>
<p>功能案例：</p>
<ul>
<li>温度传感器故障、电机故障和高温故障等。</li>
</ul>
<p>注意：故障型的数据格式为 bitmap 型，可支持多故障定义。故障型功能只支持数据上报，因此数据传输类型只能选择 <code>只上报</code>。</p>
<p>如有疑问，可查看：<a href="https://support.tuya.com/zh/help/_list?category=601215">故障型常见问题</a>。</p>
<h3>字符串型</h3>
<p>适用功能：以字符串形式传输的功能点。如果以上 4 种功能类型不能满足产品功能定义，可约定通过字符串形式传输数据。</p>
<p><img src="/goat/20200410/c35483498df14c5c888b301acf2bf20b.png" alt="image.png"></p>
<p>注意：字符串型最大长度不超过 255 字节。</p>
<h3>透传型</h3>
<p>适用功能：以二进制形式透传的功能点。一般不建议使用，上述功能点无法满足的复杂功能，可采用透传型数据。</p>
<p><img src="/goat/20200410/4a7c17ed701947b390babfc74cedb3c6.png" alt="image.png"></p>
<p>注意：透传型数据的最大长度不超过 255 字节。</p>
<p>目前，建议每个产品的标准功能点和自定义功能点累计不超过40个。若超过，请注意产品稳定性测试。</p>
<p>更多功能定义常见问题，请查看：<a href="https://support.tuya.com/zh/help/_list?category=385115">https://support.tuya.com/zh/help/_list?category=385115</a></p>
</body></html>